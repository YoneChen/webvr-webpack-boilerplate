webpackJsonp([0],{315:function(e,t,n){"use strict";(function(t,a){function o(e){return e&&e.__esModule?e:{default:e}}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function r(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function u(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var d=function(){function e(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(t,n,a){return n&&e(t.prototype,n),a&&e(t,a),t}}(),s=n(87),c=o(s),l=n(118),f=o(l),h=n(316),p=o(h),w=n(116),v=o(w),m=function(e){function n(){return i(this,n),r(this,(n.__proto__||Object.getPrototypeOf(n)).call(this,{domContainer:document.querySelector(".main-page")}))}return u(n,e),d(n,[{key:"start",value:function(){this.addEnvAudio(v.default),this.addPanorama(1e3,p.default),this.addDirectLight()}},{key:"loaded",value:function(){this.envSound.play()}},{key:"addPanorama",value:function(e,n){var o=new t.SphereGeometry(e,50,50),i=new t.MeshBasicMaterial({map:(new t.TextureLoader).load(n),side:t.BackSide}),r=new t.Mesh(o,i);return a.Scene.add(r),r}},{key:"addEnvAudio",value:function(e){var n=this;this.envSound=new t.Audio(a.AudioListener),a.Scene.add(this.envSound);var o=new t.AudioLoader;o.load(e,function(e){n.envSound.setBuffer(e),n.envSound.setLoop(!0)})}},{key:"addDirectLight",value:function(){a.Scene.add(new t.AmbientLight(16777215));var e=new t.DirectionalLight(16777215,.3);return e.position.set(50,50,50),e.castShadow=!0,e.shadow.mapSize.width=2048,e.shadow.mapSize.height=512,e.shadow.camera.near=100,e.shadow.camera.far=1200,e.shadow.camera.left=-1e3,e.shadow.camera.right=1e3,e.shadow.camera.top=350,e.shadow.camera.bottom=-350,a.Scene.add(e),e}},{key:"getTexture",value:function(e,n){var a=400,o=300,i=document.createElement("canvas");i.width=a,i.height=o;var r=i.getContext("2d");r.fillStyle="#000000",r.fillRect(0,0,a,a),r.fillStyle="#00aadd",r.font=n+"px Arial",r.textAlign="center",r.textBaseline="middle",r.fillText(e,a/2,o/2);var u=new t.Texture(i);return u.needsUpdate=!0,u}},{key:"addButton",value:function(e){var n=e.text,o=e.index,i=(e.fontSize,{hover:5,camera:a.Camera,radius:25,angle:Math.PI/6*o,width:10,height:7.5}),r=i.hover*Math.sin(i.angle),u=i.hover*Math.cos(i.angle),d=new t.PlaneGeometry(i.width,i.height),s=new t.MeshBasicMaterial({map:this.getTexture(n,32),opacity:.75,transparent:!0}),c=new t.Mesh(d,s),l=i.camera.position.x,h=i.camera.position.y,p=i.camera.position.z,w=i.radius*Math.sin(i.angle),v=i.radius*Math.cos(i.angle);c.position.set(l+w,h,p-v),c.rotation.y=-i.angle,a.Scene.add(c);var m=c.position.x,y=c.position.z,g=new f.default.Tween(c.position).to({x:m-r,z:y+u},1e3).easing(f.default.Easing.Sinusoidal.InOut).onComplete(function(){}),S=new f.default.Tween(c.position).to({x:m,z:y},1e3).easing(f.default.Easing.Sinusoidal.InOut);c.on("gaze",function(e){S.stop(),g.start()},function(e){g.stop(),S.start()})}},{key:"update",value:function(){f.default.update()}}]),n}(c.default);e.exports=new m}).call(t,n(31),n(60))},316:function(e,t,n){e.exports=n.p+"87f578a187e0691b530cef5bc2a7e757.jpg"}});